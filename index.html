<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PACES Faces</title>
    <style>
        /* CSS styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: #3498db;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }

        main {
            flex: 1; /* Fill remaining space between header and footer */
            display: flex;
            flex-direction: column;
        }

        .zone-container {
            flex: 1; /* Fill remaining space in the main content area */
            display: flex;
            flex-direction: row;
            border-top: 1px solid #ccc; /* Optional: Add a border between zones 2 and 3 */
        }
        
        .zone-1 {
            height: 10%;
            background-color: #2ecc71; /* Change the background color for Zone 1 */
            display: flex;
            justify-content: space-around;
            align-items: center;
            /* Optional: Add additional styles for the navigation buttons */
        }
        
        /* Updated styles for the buttons container */
			.zone-1-buttons {
    		width: 80%;
    		display: flex;
    		justify-content: space-between;
		  }
		  
		  /* Updated styles for the buttons */
			button {
    		font-size: 2vw; /* Responsive font size based on viewport width */
    		padding: 1.5vw 2vw; /* Responsive padding based on viewport width */
    		border: none;
    		color: black; /* Text color set to black */
    		cursor: pointer;
    		background-image: linear-gradient(#e6f7ff, #ccc); /* Gradient background */
    		max-width: 20%; /* Set maximum button width to 20% of the parent element (zone 1) */
			}

		 	/* Set maximum font size for buttons to 20 pixels */
			@media (min-width: 1000px) {
    			button {
        			font-size: 20px;
    			}
			}

			/* Hover effect for buttons */
			button:hover {
    		background-image: linear-gradient(#b3e0ff, #b3b3b3); /* Lighter gradient on hover */
			}

        .zone-left {
            flex: 1; /* Occupy half of the zone-container (50%) */
            background-color: #f1f1f1; /* Optional: Add background color to differentiate zones */
            padding: 1rem;
        }

        .zone-right {
            flex: 1; /* Occupy half of the zone-container (50%) */
            background-color: #f9f9f9; /* Optional: Add background color to differentiate zones */
            padding: 1rem;
            display: flex;
            flex-direction: column;
    			align-items: center;
        }
        
        .output-box {
    			width: 100%;
    			max-width: 500px; /* Set a maximum width for the output box */
    			margin: 0 auto; /* Center the output box horizontally */
    			padding: 1rem;
    			border: 1px solid #ccc;
    			border-radius: 5px;
    			background-color: #fff;
    			font-size: 1.6rem;
    			color: black;
		 }

        footer {
            background-color: #3498db;
            color: #fff;
            text-align: center;
            padding: 1rem;
        }
        
        /* Flashcard styles */
        .flashcard {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px; /* Adjust as needed */
            max-height: 100%;
            overflow: auto;
        }
        
        /* Update to make questions larger and bolded */
        .question {
            font-size: 16px; /* Adjust the font size as needed */
            font-weight: bold;
        }

        /* Hide the answer initially */
        .answer {
            display: none;
            font-size: 20px;
            font-weight: normal;
        }
        
        /* Style for the overlay box */
    	 .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
    }

   	  .overlay-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #f9f9f9;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 80%;
    }

   	  .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
    }
    
    	/* Set initial font size for the flashcard text (question and answer) */
.flashcard h2, .flashcard p {
    font-size: 4vw; /* Responsive font size based on viewport width */
}

/* Set maximum and minimum font size for the flashcard text */
@media (max-width: 600px) {
    .flashcard h2, .flashcard p {
        font-size: 16px; /* Minimum font size of 16 pixels */
    }
}

@media (min-width: 601px) and (max-width: 1000px) {
    /* Interpolate font size between 16px and 24px based on screen width */
    .flashcard h2, .flashcard p {
        font-size: calc(16px + 8 * ((100vw - 600px) / 400)); /* Gradient font size */
    }
}

@media (min-width: 1001px) {
    .flashcard h2, .flashcard p {
        font-size: 24px; /* Maximum font size of 24 pixels */
    }
}
{
    .flashcard h2, .flashcard p {
        font-size: 24px; /* Maximum font size of 24 pixels */
    }
}

    </style>
</head>
<body>
    <header>
        <h1>PACES Faces</h1>
    </header>
<main>
    <div class="zone-container">
        <div class="zone-left">
            <!-- Zone 2 content goes here (Flashcard) -->
            <div class="flashcard">
                <!-- Flashcard content (question and answer) goes here -->
                <div class="question">
                    <!-- The question will always be visible -->
                    <h2 class="question-text">Flashcard Question</h2>
                </div>
                <div class="answer">
                    <!-- The answer will be hidden initially -->
                    <h2> class="answer-text">Flashcard Answer<</h2>
                </div>
            </div>
        </div>
        <div class="zone-right">
            <!-- Zone 3 content goes here -->
            <div class="output-box">
                <!-- Voice output box -->
                <h2></h2>
                <p id="voiceOutput"></p>
            </div>
        </div>
    </div>
</main>


    <div class="zone-1">
        <!-- Zone 1 content (buttons) goes here -->
        <div class="zone-1-buttons">
            <button id="moreInfoBtn">More info</button>
            <button id="previousBtn">Previous</button>
            <button id="flipBtn">Flip</button>
            <button id="nextBtn">Next</button>
            <button id="speakAnswerBtn">Speak answer</button>
        </div>
    </div>
    <footer>
        <p>&copy; 2023 Master Medical</p>
    </footer>
    
    <div class="overlay">
    <div class="overlay-content">
        <span class="close-btn" onclick="closeOverlay()">&times;</span>
        <p id="overlayText"></p>
    </div>
</div>
    
<!-- JavaScript code -->
<script>
  const flashcard = document.querySelector('.flashcard');
  const moreInfoBtn = document.getElementById('moreInfoBtn');
  const previousBtn = document.getElementById('previousBtn');
  const flipBtn = document.getElementById('flipBtn');
  const nextBtn = document.getElementById('nextBtn');
  const speakAnswerBtn = document.getElementById('speakAnswerBtn');
  const voiceOutput = document.getElementById('voiceOutput');

  let flipped = false;
  let recognizing = false;
  let recognition;

  // Sample flashcard content (you can remove this since we'll fetch data from a JSON file)
  let flashcardData = [];

  // Function to shuffle the flashcardData array randomly
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // Fetch the flashcard data from the JSON file on GitHub
  fetch('https://raw.githubusercontent.com/mastermedical/flash/main/flashcards.json')
    .then((response) => response.json())
    .then((data) => {
      flashcardData = data; // Store the fetched data in the flashcardData variable
      shuffleArray(flashcardData); // Shuffle the flashcardData array before displaying the flashcards
      currentFlashcardIndex = 0; // Reset the current flashcard index to the beginning
      updateFlashcard(); // Initial update of the flashcard content after fetching the data
    })
    .catch((error) => {
      console.error('Error fetching flashcard data:', error);
    });

  // Array to keep track of the flipped state for each flashcard
  let flippedState = new Array(flashcardData.length).fill(false);

  // Initialize the currentFlashcardIndex
  let currentFlashcardIndex = 0;

  // Function to update the flashcard content
  function updateFlashcard() {
    const { question, answer } = flashcardData[currentFlashcardIndex];
    const questionContainer = document.querySelector('.question');
    const answerContainer = document.querySelector('.answer');

    // Update the question text (remains always visible)
    questionContainer.innerHTML = `<h2>${question}</h2>`;

    // Update the answer text (initially hidden)
    answerContainer.innerHTML = `<h2>${answer}</h2>`;
    answerContainer.style.display = 'none';
    flipped = false;

    // Enable or disable the "Flip" button based on the flippedState for this flashcard
    flipBtn.disabled = flippedState[currentFlashcardIndex];

    // Update the font size of the voice output box to match the flashcard text
    const fontSize = window.getComputedStyle(questionContainer).getPropertyValue('font-size');
    voiceOutput.style.fontSize = fontSize;
  }

  // Function to handle the "Flip" button
  function flipFlashcard() {
    if (!flipped && !flippedState[currentFlashcardIndex]) {
      const answerContainer = document.querySelector('.answer');
      answerContainer.style.display = 'block';
      flipped = true;
      flippedState[currentFlashcardIndex] = true;
      moreInfoBtn.disabled = false; // Enable "More info" button
      flipBtn.disabled = true; // Disable "Flip" button for this flashcard
    }
  }

  // Function to handle the "Next" button
  function nextFlashcard() {
    if (currentFlashcardIndex < flashcardData.length - 1) {
      // Stop the ongoing recognition if it's active
      if (recognizing) {
        recognition.stop();
        recognizing = false;
      }

      currentFlashcardIndex++;
      flipped = false; // Reset flipped state when moving to the next flashcard
      updateFlashcard();
      moreInfoBtn.disabled = true; // Disable "More info" button until flipped again
      voiceOutput.textContent = ''; // Clear the voice output box
    }
  }

  // Function to handle the "Previous" button
  function previousFlashcard() {
    if (currentFlashcardIndex > 0) {
      // Stop the ongoing recognition if it's active
      if (recognizing) {
        recognition.stop();
        recognizing = false;
      }

      currentFlashcardIndex--;
      flipped = false; // Reset flipped state when moving to the previous flashcard
      updateFlashcard();
      moreInfoBtn.disabled = true; // Disable "More info" button until flipped again
      voiceOutput.textContent = ''; // Clear the voice output box
    }
  }

  // Function to handle the "More info" button and display the overlay box
  function showMoreInfo() {
    if (flipped) {
      // Get the moreInfo content from the current flashcard data
      const moreInfoContent = flashcardData[currentFlashcardIndex].moreInfo;
      const overlayText = document.getElementById('overlayText');
      overlayText.textContent = moreInfoContent;

      // Show the overlay box
      const overlay = document.querySelector('.overlay');
      overlay.style.display = 'block';
    }
  }

// Function to handle the "Speak answer" button
function toggleDictation() {
  if (!recognizing) {
    recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-US'; // Set language to English (you can change it to another language if needed)

    recognition.onstart = () => {
      recognizing = true;
      speakAnswerBtn.textContent = 'Stop dictation'; // Change button text to 'Stop dictation' during voice recognition
    };

    recognition.onend = () => {
      recognizing = false;
      speakAnswerBtn.textContent = 'Speak answer'; // Change button text back to 'Speak answer' when voice recognition stops
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      voiceOutput.textContent = transcript; // Update the voice output text
    };

    recognition.start();
  } else {
    recognition.stop();
    recognizing = false;
    speakAnswerBtn.textContent = 'Speak answer'; // Change button text back to 'Speak answer' when voice recognition stops
  }
}

  // Function to update the voice output text
  function updateVoiceOutput(text) {
    voiceOutput.textContent = text;
  }

  // Function to close the overlay box when the close button (X) is clicked
  function closeOverlay() {
    const overlay = document.querySelector('.overlay');
    overlay.style.display = 'none';
  }

  // Attach event listeners to the buttons
  moreInfoBtn.addEventListener('click', showMoreInfo);
  flipBtn.addEventListener('click', flipFlashcard);
  nextBtn.addEventListener('click', nextFlashcard);
  previousBtn.addEventListener('click', previousFlashcard);

  // Add event listener for "Speak answer" button when implementing voice recognition
  speakAnswerBtn.addEventListener('click', toggleDictation);
</script>

    
    
</body>
</html>
